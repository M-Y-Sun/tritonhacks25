from fastapi import FastAPI

app = FastAPI()

buildings = {}


@app.get("/{building}/counts")
@app.get("/{building}/{room_enter}/{room_leave}/{person_count}")
async def update_req(
    building,
    room_leave,
    room_enter,
    person_count
):
    if (not building in buildings):
        buildings[building] = {}
    pcount = int(person_count)
    buildings[room_enter] = buildings[enter] or 0 + pcount
    buildings[] = buildings[enter] or 0 + pcount
    return {
            "building":building,
            "room_leave":room_leave,
            "room_enter":room_enter,
            "person_count":pcount
    }
